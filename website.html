<!DOCTYPE html>
<html>
<head>
    <link rel="icon" href="./images/pattern2.png">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>

    <script src="./js/leaflet.js"></script>

    <script src="./js/jquery-3.6.0.min.js"></script>
    <script src="./js/vegas.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vegas/2.4.4/vegas.min.css" />
    <link href="css/tooplate-barista.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-icons.css" rel="stylesheet">
    <link href="css/vegas.min.css" rel="stylesheet">

</head>

<body>
<main>
    <section id="page_1" class="hero-section d-flex justify-content-center align-items-center">
        <div class="container">
            <div class="align-items-center">
                <div class="text-white">
                    <h1 style="font-size:400%;"><b>A Study on <br><br><mark style="color:aliceblue; background-color: #61a0ff;line-height:2;">Marco Polo's View of China</mark></b></h1>
                </div>
            </div>
        </div>
        <div class="hero-slides" style="filter: brightness(60%);"></div>
        
        <script>
            $(function() {
              $('.hero-slides').vegas({
                  slides: [
                      { src: './images/banner5.jpg' },
                      { src: './images/banner6.jpg' },
                  ],
                  timer: false,
                  animation: 'kenburns',
              });
            });
        </script>

    </section>

    <section class="barista-section section-padding section-bg1" id="page_2">
        <div class="container" style="height: 700px">
            <div class="align-items-center">
                <p class="text-white" style="text-align:center; font-size:300%;">Introduction</p>
            </div>
        </div>
        </section>
    </main>


    <section class="barista-section section-padding section-bg2" style="height:800px;" id="page_3">
        <div style="background-color:#fff;height: 680px;width:100%">
        <div class="container">
            <!--<p class="text-white" style="text-align:center; font-size:300%;font-weight: 1000;">Map</p>-->
            <div style=" float:left; width:50%">
                <div id="map" style="height: 650px; max-width: 500px;"></div>
                <p style="line-height:2;font-size:100%;"><em>《九域守令圖》</em></p>
            </div>
            <div class="align-items-center" style=" float:right; height:650px;width:50%; margin-top:10px;">
                <div class="rec-1" style="display:inline-block;margin-top:30px;">
                    <div class="map-select" style="color:#01204d">
                        <div class="my-word">
                            <span class="my-span" style="--i:0.5">W</span>
                            <span class="my-span" style="--i:0.75">h</span>
                            <span class="my-span" style="--i:1">a</span>
                            <span class="my-span"style="--i:1.25">t&nbsp;</span>
                        </div>
                        <div class="my-word">
                            <span class="my-span" style="--i:1.5">W</span>
                            <span  class="my-span"style="--i:1.75">o</span>
                            <span class="my-span"style="--i:2">u</span>
                            <span class="my-span"style="--i:2.25">l</span>
                            <span class="my-span" style="--i:2.5">d&nbsp;</span>
                        </div>
                        <div class="my-word">
                            <span class="my-span" style="--i:2.75">Y </span>
                            <span class="my-span" style="--i:3">o</span>
                            <span  class="my-span"style="--i:3.25">u&nbsp;</span>
                        </div>
                        <div class="my-word">
                            <span class="my-span"style="--i:3.5">l</span>
                            <span class="my-span"style="--i:3.75">i</span>
                            <span class="my-span" style="--i:4">k</span>
                            <span class="my-span" style="--i:4.25">e&nbsp;</span>
                        </div>
                        <div class="my-word">
                            <span class="my-span"style="--i:4.5">t</span>
                            <span class="my-span"style="--i:4.75">o&nbsp;</span>
                        </div>
                        <div class="my-word">
                            <span class="my-span"style="--i:5">l</span>
                            <span class="my-span"style="--i:5.25">e</span>
                            <span class="my-span" style="--i:5.5">a</span>
                            <span class="my-span" style="--i:5.75">r</span>
                            <span class="my-span" style="--i:6">n</span>
                            <span class="my-span" style="--i:6.25">?</span>
                        </div>
                        <p><br></p>
                        <button class="button-map button02 rec-click rec2" role="button" data-react="rec-2" onclick="overview_map()">Overview</button>
                        <button class="button-map button01 rec-click rec3" role="button" data-react="rec-3">Religion</button>
                        <button class="button-map button01 rec-click rec4" role="button" data-react="rec-4">Specialty</button>
                        <button class="button-map button01 rec-click rec5" role="button" data-react="rec-5">Industry</button>
                    </div>
                </div>
                <div class="rec-2" style="height:100%;width:100%;display:none">
                    <div style="margin-left:20px;height:100%;width:100%">
                        <p id="map-text-2" class="select_text" style="color:#3e5e88; height:15%"><b>The Top 12 Mostly described Chinese Locations</b></p>
                        <!-- Load d3.js -->
                        <script src="https://d3js.org/d3.v4.js"></script>
                        <!-- Create a div where the graph will take place -->
                        <div id="my_dataviz" style="display:inline-block;text-align:center;height:60%;width:100%"></div>
                        <p style="text-align:center;font-size:120%;height:7%">Number of Chinese Locations Marco-Polo have described: <mark>58</mark></p>
                        <p style="text-align:center;font-size:120%;height:7%">Average Number of Words used to describe one location: <mark>427</mark></p>
                        <button  id="button-return-2" class="button-return"onclick="return_rec_1()"><u>Return</u></button>
                    </div>
                </div>

                <div class="rec-3" style="height:100%;width:100%;display:none">
                    <div style="margin-left:20px;height:100%;width:100%">
                        <p id="map-text-3" class="select_text" style="color:#01204d;"><b>Religion</b></p>
                        <button id="button-return-3" class="button-return" onclick="return_rec_1()"><u>Return</u></button>
                    </div>
                </div>

                <div class="rec-4" style="height:100%;width:100%;display:none" >
                    <div style="margin-left:20px;height:100%;width:100%">
                        <p id="map-text-4" class="select_text" style="color:#01204d;"><b>Religion</b></p>
                        <button id="button-return-4" class="button-return" onclick="return_rec_1()"><u>Return</u></button>
                    </div>
                </div>

                <div class="rec-5" style="height:100%;width:100%;display:none">
                    <div style="margin-left:20px;height:100%;width:100%">
                        <p id="map-text-5" class="select_text" style="color:#01204d;"><b>Religion</b></p>
                        <button id="button-return-5" class="button-return" onclick="return_rec_1()"><u>Return</u></button>
                    </div>
                </div>

                <script>
                const observer = new IntersectionObserver(entries => {
                    entries.forEach(entry => {
                        const mySpans = entry.target.querySelectorAll('span.my-span');
                        mySpans.forEach(span => {
                            if (entry.isIntersecting) {
                                span.classList.add('jump');
                            } else {
                                span.classList.remove('jump');
                            }
                        });
                    });
                });

                observer.observe(document.querySelector('.map-select'));

                $(function(){
                    $(".rec-click").click(function(){
                        var target = $(this).data("react");
                    $("."+target).show().siblings("div[class*=rec-]").hide();
                })
                }); 
    
                $(function() {
                // Get all the buttons with class "btn"
                var rectangles = $(".rec");
    
                // Iterate over each button
                rectangles.each(function(index) {
                    console.log(index)
                    // Get the corresponding section with class "section-{index+1}"
                    var section = $(".rec-" + (index+1));
                    
                    
                    // Add a click event listener to the button
                    $(this).click(function() {
                    // Hide all sections except the current one
                        $(".rec").not(section).hide();
        
                        // Show the current section
                        section.show();
                        


                    });
                });
                });

                $(document).ready(function(){
                    for (let i = 2; i <= 5; i++) {
                        const map_button=document.querySelector(`.rec${i}`);
                        const text = document.querySelector(`#map-text-${i}`);
                        const button_return = document.querySelector(`#button-return-${i}`);
                        map_button.addEventListener("click",function(e) {
                            text.style.display = 'flex';
                            button_return.style.display = 'inline-block'
                        })
                    }
                })
                

                function return_rec_1(){
                    for (let i = 2; i <= 5; i++) {
                        $(".rec-" + i).hide()
                        $("#map-text-" + i).hide()
                        $("#button-return-" + i).hide()
                    
                    }
                    $(".rec-1").show();
                    return_map();
                }

                </script>
                <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

                <script>
                    // set the dimensions and margins of the graph
                    var margin = {top: 5, right: 10, bottom: 5, left: 10},
                    //width = 650 - margin.left - margin.right,
                    //height = 400 - margin.top - margin.bottom;
                    width = window.innerWidth * 0.4 - margin.left - margin.right,
                    height =  window.innerHeight * 0.5 - margin.top - margin.bottom;
                
                    // append the svg object to the body of the page
                    var svg_overview = d3.select("#my_dataviz")
                        .append("svg")
                        .attr("width", width + margin.left + margin.right)
                        .attr("height", height + margin.top + margin.bottom)
                        .append("g")
                        .attr("transform",
                                "translate(" + margin.left + "," + margin.top + ")");

                
                    // Read data
                    d3.csv('./csv/wordcount.csv', function(data) {
                    
                        // stratify the data: reformatting for d3.js
                        var root = d3.stratify()
                            .id(function(d) { return d.Location; })   // Name of the entity (column name is name in csv)
                            .parentId(function(d) { return d.Parent; })   // Name of the parent (column name is parent in csv)
                            (data);
                        root.sum(function(d) { return +d.Word })   // Compute the numeric value for each entity
                        
                        // Then d3.treemap computes the position of each element of the hierarchy
                        // The coordinates are added to the root object above
                        d3.treemap()
                            .size([width, height])
                            .padding(4)
                            (root)
                        
                            const color = d3.scaleSequential()
                                .interpolator(d3.interpolateBlues)
                                .domain([100, 1100]);
                                //.domain([d3.max(data, d => d.Word), d3.min(data, d => d.Word)]);

                        console.log(root.leaves())
                        // use this information to add rectangles:
                        svg_overview
                            .selectAll("rect")
                            .data(root.leaves())
                            .enter()
                            .append("rect")
                                .attr('x', function (d) { return d.x0; })
                                .attr('y', function (d) { return d.y0; })
                                .attr('width', function (d) { return d.x1 - d.x0; })
                                .attr('height', function (d) { return d.y1 - d.y0; })
                                .style("stroke", "black")
                                .attr("fill", d => color(d.data.Word))
                                .style("rx","20")
                        
                        // and to add the text labels
                        svg_overview
                            .selectAll("text")
                            .data(root.leaves())
                            .enter()
                            .append("text")
                                .attr("x", function(d){ return d.x0+10})    // +10 to adjust position (more right)
                                .attr("y", function(d){ return d.y0+20})    // +20 to adjust position (lower)
                                .text(function(d){ return d.data.Location})
                                .attr("font-size", "15px")
                                .attr("fill", "white")
                    })
                </script>

            </div>
        </div>
        </div>
            <script>
                var map = L.map('map',{
                maxBounds:[[17, 100], [42, 123]],
                maxBoundsViscosity: 1,
                minZoom:5,
                }).setView([30.0, 112], 5);
                L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 10,
                minZoom: 3,
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                }).addTo(map);

                map.on('click', function(e) {
                    alert("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng)
                });


                //add historical map
                var imageUrl = "./images/map07.png",
                //imageBounds = [[10, 80], [60, 130]];
                imageBounds = [[17, 100], [42, 123]];
                L.imageOverlay(imageUrl, imageBounds,{opacity:1}).addTo(map);

                //logo template
                var anyIcon = L.Icon.extend({
                    options: {
                        shadowUrl: './images/shadow2.png',
                        iconSize:     [35, 35], // size of the icon
                        shadowSize:   [40, 40]
                    }
                });

                //import logos of different colors
                var greenIcon = new anyIcon({iconUrl: './images/green.png'}),
                    redIcon = new anyIcon({iconUrl: './images/red.png'}),
                    blueIcon = new anyIcon({iconUrl: './images/blue02.png'}),
                    yellowIcon = new anyIcon({iconUrl: './images/yellow.png'});
                    greyIcon = new anyIcon({iconUrl:"./images/grey.png"});

                //info of each markers
                const original_markers = Object.freeze([
                    {lat: 28.462896451430616, lng: 118.21728517301383, icon:blueIcon, popupContent: "Xingzai"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Yongchang"},
                    {lat: 25.407554540244227, lng: 118.23925782926383, icon:blueIcon, popupContent: "Fuzhou(City)"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Qarajang"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Jiandu"},
                    //{lat: 40, lng: 116, icon:redIcon,  popupContent: "Xiezhou"},
                    {lat: 30.234391407813202, lng: 110.39501954801383, icon:blueIcon,  popupContent: "Xiangyangfu"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Daidu"},
                    {lat: 30.091910087077462, lng: 102.02343751676382, icon:blueIcon,  popupContent: "Chengdufu"},
                    {lat: 30.215405799706534, lng: 117.32739259488883, icon:blueIcon,  popupContent: "Zhenzhou"},
                    {lat: 23.89990050209837, lng: 117.51416017301382, icon:blueIcon,  popupContent: "Zayton"},
                    {lat: 29.3764310567375, lng: 106.15429689176382, icon:blueIcon,  popupContent: "Fuling"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Yachi"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Fuzhou(Kingdom)"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Changzhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Chang’anfu"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Suzhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Guanzhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Xinzhou Matou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Tingzhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Jianningfu"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Changlu"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Yangzhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Zhenjiangfu"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Hejianfu"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Huai'anzhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Guangyuan"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Houguan"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Aq-baliq"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Aq-baliq Manzi"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Liucheng"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Taiyuanfu"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Dongpingfu"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Baoying"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Anqing"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Taizhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Jiangling"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Ganpu"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Gaoyou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Suichang"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Pizhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Quzhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Suqian"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Tonglu"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Tongzhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Changxing"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Zhuozhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Wuxing"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Chuzhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Wuzhou"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Wujiang"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Pingyangfu"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "Kuizhou(province)"},
                    {lat: 0, lng: 0, icon:greyIcon,  popupContent: "huaiyin"}
                ]);

                function copyMarker(marker) {
                    return {
                        lat: marker.lat,
                        lng: marker.lng,
                        icon: L.icon(marker.icon.options),
                        popupContent: marker.popupContent
                    };
                }

                const current_markers = original_markers.map(copyMarker);
                
                const location_overview=["Xingzai","Yongchang","Fuzhou(City)","Qarajang","Jiandu","Xiezhou","Xiangyangfu","Chengdufu","Zhenzhou","Zayton","Fuling"]

                function overview_map(){
                    updateMarkerIcons(greenIcon,"overview");
                }

                function return_map(){
                    updateMarkerIcons(greyIcon,"return");
                }

                function updateMarkerIcons(color,check) {
                    // Loop through the markers array and update the icon property
                    current_markers.forEach(function(marker) {
                        if (check=="overview"){
                            if (location_overview.includes(marker.popupContent)) {
                                marker.icon = color;
                            } else {
                                marker.icon = greyIcon;
                            }
                        }else if (check=="return"){
                            for (var i=0;i<original_markers.length;i++){
                                if (marker.popupContent==original_markers[i].popupContent){
                                    marker.icon=original_markers[i].icon
                                }
                            }
                        }
                    });
                    // Loop through the marker layers on the map and update the icon
                    map.eachLayer(function(layer) {
                        if (layer instanceof L.Marker) {
                            var marker = current_markers.find(function(m) {
                                return m.popupContent === layer.getPopup().getContent();
                            });
                            layer.setIcon(marker.icon);
                        }
                    });
                }
    

                // Loop through the markers array and create a marker for each object
                for (var i = 0; i < current_markers.length; i++) {
                    var marker = L.marker([current_markers[i].lat, current_markers[i].lng],{icon:current_markers[i].icon, opacity:0.7}).addTo(map);
                    marker.bindPopup(current_markers[i].popupContent,{
                        closeButton: false,
                        className:'stylePopup'
                    });
                    marker.on('mouseover',function (e) {
                        this.openPopup();
                        this.setOpacity(1)
                    });
                    marker.on('mouseout', function (e) {
                        this.closePopup();
                        this.setOpacity(0.7)
                    });
                    marker.on('click',function(e) {
                        console.log(this._popup._content);
                        $("#"+this._popup._content).click();
                        $('html, body').stop().animate({
                        scrollTop: 2600
                    }, {
                        duration:100,
                        easing: 'linear'
                    });
                    })
                };
            </script>
    </section>


    <section id="connect1" style="height:250px; position: relative;">
        <img src="./images/pattern.png" style="position: absolute; bottom: 0; left: 0%; width: 20%; height: 250px;z-index: 0">
        <img src="./images/pattern.png" style="position: absolute; bottom: 0; left: 20%; width: 20%; height: 250px;z-index: 0">
        <img src="./images/pattern.png" style="position: absolute; bottom: 0; left: 40%; width: 20%; height: 250px;z-index: 0">
        <img src="./images/pattern.png" style="position: absolute; bottom: 0; left: 60%; width: 20%; height: 250px;z-index: 0">
        <img src="./images/pattern.png" style="position: absolute; bottom: 0; left: 80%; width: 20%; height: 250px;z-index: 0">
        <span style="position: absolute; top: 0; left: 0; height: 50px; width: 100%; background-color: #2a5287;z-index: 1;"></span>
    </section>

    <section class="section-padding section-bg3" style="height: 715px" id="page_4">
        <div class="container">
            <div style="margin-top:5px;margin-bottom:5px;text-align:center;">
                <img id="scrollToMap" class="arrow" src="./images/arrow.png"style="width:20px; height:20px;margin-top:2px;text-align:center;z-index: 1;" >
            </div>
            <div style="margin-top:10px;margin-bottom:10px;text-align:center; ">
                <div class="section-1" style="display:inline-block;">
                    <h1 style="text-align:center;"><b>Location</b></h1>
                    <div style="float:left; width:49%;height:600px">
                        <img class="shape" src="./images/quanzhou.jpg">
                    </div>
                    <div style="float:left; width:2%;height:570px"></div>
                    <div style="float:right; width:49%;height:570px">
                        <div id="draw_box" style="margin-left:20px;height:100%;width:100%">
                            <svg id='rectangle' class="my-svg-1" width="100%" height="100%">
                                <rect id='stroke'class="my-rec-1" stroke="#3e5e88" rx='50' ry='50'/>
                            <switch>
                                <foreignObject width="100%" height="100%" >
                                    <p id="text-1" class="text-white" style="line-height:5;">any text</p>
                                </foreignObject>
                            </switch>
                            </svg>
                        </div>
                    </div>
                </div>
                
        
                <div class="section-2" style="display:none;">
                    <h1 style="text-align:center;"><b>Location</b></h1>
                    <div style="float:left; width:49%;height:600px">
                        <img class="shape" src="./images/dadu.jpg">
                    </div>
                    <div style="float:left; width:2%;height:570px"></div>
                    <div style="float:right; width:49%;height:570px">
                        <div id="draw_box" style="margin-left:20px;height:100%;width:100%">
                            <svg id='rectangle' class="my-svg-2" width="100%" height="100%">
                                <rect id='stroke'class="my-rec-2" stroke="#3e5e88" rx='50' ry='50'/>
                            <switch>
                                <foreignObject width="100%" height="100%" >
                                    <p id="text-2" class="text-white" style="line-height:5;">any text</p>
                                </foreignObject>
                            </switch>
                            </svg>
                        </div>
                    </div>
                </div>
        
                <div class="section-3"  style="display:none" >
                    <h1 style="text-align:center;"><b>Location</b></h1>
                    <div style=" float:left; width:49%;height:600px">
                        <img class="shape" src="./images/dadu.jpg" >
                    </div>
                    <div style="float:left; width:2%;height:570px"></div>
                    <div style=" float:right; width:49%;height:570px">
                        <div id="draw_box" style="margin-left:20px;height:100%;width:100%">
                            <svg id='rectangle' class="my-svg-3" width="100%" height="100%">
                                <rect id='stroke'class="my-rec-3" stroke="#3e5e88" rx='50' ry='50'/>
                            <switch>
                                <foreignObject width="100%" height="100%" >
                                    <p id="text-3" class="text-white" style="line-height:5;">any text</p>
                                </foreignObject>
                            </switch>
                            </svg>
                        </div>

                    </div>
                </div>
        
                <div class="section-4"  style="display:none">
                    <h1 style="text-align:center;"><b>Location</b></h1>
                    <div style=" float:left; width:49%;height:600px">
                        <img class="shape" src="./images/dadu.jpg" >
                    </div>
                    <div style="float:left; width:2%;height:570px"></div>
                    <div style=" float:right; width:49%;height:570px">
                        <div id="draw_box" style="margin-left:20px;height:100%;width:100%">
                            <svg id='rectangle' class="my-svg-4" width="100%" height="100%">
                                <rect id='stroke'class="my-rec-4" stroke="#3e5e88" rx='50' ry='50'/>
                            <switch>
                                <foreignObject width="100%" height="100%" >
                                    <p id="text-4" class="text-white" style="line-height:5;">any text</p>
                                </foreignObject>
                            </switch>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="section-5"  style="display:none">
                    <h1 style="text-align:center;"><b>Location</b></h1>
                    <div style=" float:left; width:49%;height:600px">
                        <img class="shape" src="./images/dadu.jpg" >
                    </div>
                    <div style="float:left; width:2%;height:570px"></div>
                    <div style=" float:right; width:49%;height:570px">
                        <div id="draw_box" style="margin-left:20px;height:100%;width:100%">
                            <svg id='rectangle' class="my-svg-5" width="100%" height="100%">
                                <rect id='stroke'class="my-rec-5" stroke="#3e5e88" rx='50' ry='50'/>
                            <switch>
                                <foreignObject width="100%" height="100%" >
                                    <p id="text-5" class="text-white" style="line-height:5;">any text</p>
                                </foreignObject>
                            </switch>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="section-6"  style="display:none">
                    <h1 style="text-align:center;"><b>Location</b></h1>
                    <div style=" float:left; width:49%;height:600px">
                        <img class="shape" src="./images/dadu.jpg" >
                    </div>
                    <div style="float:left; width:2%;height:570px"></div>
                    <div style=" float:right; width:49%;height:570px">
                        <div id="draw_box" style="margin-left:20px;height:100%;width:100%">
                            <svg id='rectangle' class="my-svg-6" width="100%" height="100%">
                                <rect id='stroke'class="my-rec-6" stroke="#3e5e88" rx='50' ry='50'/>
                            <switch>
                                <foreignObject width="100%" height="100%" >
                                    <p id="text-6" class="text-white" style="line-height:5;">any text</p>
                                </foreignObject>
                            </switch>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="section-7"  style="display:none">
                    <h1 style="text-align:center;"><b>Location</b></h1>
                    <div style=" float:left; width:49%;height:600px">
                        <img class="shape" src="./images/dadu.jpg" >
                    </div>
                    <div style="float:left; width:2%;height:570px"></div>
                    <div style=" float:right; width:49%;height:570px">
                        <div id="draw_box" style="margin-left:20px;height:100%;width:100%">
                            <svg id='rectangle' class="my-svg-7" width="100%" height="100%">
                                <rect id='stroke'class="my-rec-7" stroke="#3e5e88" rx='50' ry='50'/>
                            <switch>
                                <foreignObject width="100%" height="100%" >
                                    <p id="text-7" class="text-white" style="line-height:5;">any text</p>
                                </foreignObject>
                            </switch>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="section-8"  style="display:none">
                    <h1 style="text-align:center;"><b>Location</b></h1>
                    <div style=" float:left; width:49%;height:600px">
                        <img class="shape" src="./images/dadu.jpg" >
                    </div>
                    <div style="float:left; width:2%;height:570px"></div>
                    <div style=" float:right; width:49%;height:570px">
                        <div id="draw_box" style="margin-left:20px;height:100%;width:100%">
                            <svg id='rectangle' class="my-svg-8" width="100%" height="100%">
                                <rect id='stroke'class="my-rec-8" stroke="#3e5e88" rx='50' ry='50'/>
                            <switch>
                                <foreignObject width="100%" height="100%" >
                                    <p id="text-8" class="text-white" style="line-height:5;">any text</p>
                                </foreignObject>
                            </switch>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="section-9"  style="display:none">
                    <h1 style="text-align:center;"><b>Location</b></h1>
                    <div style=" float:left; width:49%;height:600px">
                        <img class="shape" src="./images/dadu.jpg" >
                    </div>
                    <div style="float:left; width:2%;height:570px"></div>
                    <div style=" float:right; width:49%;height:570px">
                        <div id="draw_box" style="margin-left:20px;height:100%;width:100%">
                            <svg id='rectangle' class="my-svg-9" width="100%" height="100%">
                                <rect id='stroke'class="my-rec-9" stroke="#3e5e88" rx='50' ry='50'/>
                            <switch>
                                <foreignObject width="100%" height="100%" >
                                    <p id="text-9" class="text-white" style="line-height:5;">any text</p>
                                </foreignObject>
                            </switch>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="section-10"  style="display:none" >
                    <h1 style="text-align:center;"><b>Location</b></h1>
                    <div style=" float:left; width:49%;height:600px">
                        <img class="shape" src="./images/dadu.jpg" >
                    </div>
                    <div style="float:left; width:2%;height:570px"></div>
                    <div style=" float:right; width:49%;height:570px">
                        <div id="draw_box" style="margin-left:20px;height:100%;width:100%">
                            <svg id='rectangle' class="my-svg-10" width="100%" height="100%">
                                <rect id='stroke'class="my-rec-10" stroke="#3e5e88" rx='50' ry='50'/>
                            <switch>
                                <foreignObject width="100%" height="100%" >
                                    <p id="text-10" class="text-white" style="line-height:5;">any text</p>
                                </foreignObject>
                            </switch>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="section-11"  style="display:none">
                    <h1 style="text-align:center;"><b>Location</b></h1>
                    <div style=" float:left; width:49%;height:600px">
                        <img class="shape" src="./images/dadu.jpg" >
                    </div>
                    <div style="float:left; width:2%;height:570px"></div>
                    <div style=" float:right; width:49%;height:570px">
                        <div id="draw_box" style="margin-left:20px;height:100%;width:100%">
                            <svg id='rectangle' class="my-svg-11" width="100%" height="100%">
                                <rect id='stroke'class="my-rec-11" stroke="#3e5e88" rx='50' ry='50'/>
                            <switch>
                                <foreignObject width="100%" height="100%" >
                                    <p id="text-11" class="text-white" style="line-height:5;">any text</p>
                                </foreignObject>
                            </switch>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="section-12"  style="display:none">
                    <h1 style="text-align:center;"><b>Location</b></h1>
                    <div style=" float:left; width:49%; height:600px">
                        <img class="shape" src="./images/dadu.jpg" >
                    </div>
                    <div style="float:left; width:2%;height:600px"></div>
                    <div style=" float:right; width:49%;height:570px">
                        <div id="draw_box" style="margin-left:20px;height:100%;width:100%">
                            <svg id='rectangle' class="my-svg-12" width="100%" height="100%">
                                <rect id='stroke'class="my-rec-12" stroke="#3e5e88" rx='50' ry='50'/>
                            <switch>
                                <foreignObject width="100%" height="100%" >
                                    <p id="text-12" class="text-white" style="line-height:5;">any text</p>
                                </foreignObject>
                            </switch>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    

        <script>
            var mapElement = document.getElementById("page_3");
            var arrowElement = document.getElementById("scrollToMap");
            arrowElement.addEventListener("click", function() {
                mapElement.scrollIntoView({ behavior: "smooth" });
            });
        </script>
        
    </section>

    <section class="align-items-center" style="height: 50px" id="navbar">
        <div style="margin-top:0px">
            <div style="text-align:center; bottom:0px;">
                <span class="productbtn btn1 btn-click" data-action="section-1" id="Quanzhou"></span>
                <span class="productbtn btn2 btn-click" data-action="section-2" id="Dadu"></span>
                <span class="productbtn btn3 btn-click" data-action="section-3" id="Yangzhou"></span>
                <span class="productbtn btn4 btn-click" data-action="section-4" id="XiangYangFu"></span>
                <span class="productbtn btn5 btn-click" data-action="section-5" id="m5"></span>
                <span class="productbtn btn6 btn-click" data-action="section-6" id="m6"></span>
                <span class="productbtn btn7 btn-click" data-action="section-7" id="m7"></span>
                <span class="productbtn btn8 btn-click" data-action="section-8" id="m8"></span>
                <span class="productbtn btn9 btn-click" data-action="section-9" id="m9"></span>
                <span class="productbtn btn10 btn-click" data-action="section-10" id="m10"></span>
                <span class="productbtn btn11 btn-click" data-action="section-11" id="m11"></span>
                <span class="productbtn btn12 btn-click" data-action="section-12" id="m12"></span>
            </div>
            <script>
                $(function(){
                    $(".btn-click").click(function(){
                        var target = $(this).data("action");
                    $("."+target).show().siblings("div[class*=section-]").hide();
                })
                }); 
    
                $(function() {
                // Get all the buttons with class "btn"
                var buttons = $(".btn");
    
                // Iterate over each button
                buttons.each(function(index) {
                    // Get the corresponding section with class "section-{index+1}"
                    var section = $(".section-" + (index+1));
    
                    // Add a click event listener to the button
                    $(this).click(function() {
                    // Hide all sections except the current one
                    $(".section-").not(section).hide();
    
                    // Show the current section
                    section.show();
                    });
                });
                });

                for(var i=1;i<=12;i++){
                // Get the SVG and rectangle elements
                const svg_rect = document.querySelector(`.my-svg-${i}`);
                const rect = document.querySelector(`.my-rec-${i}`);
                // Define the resize function
                function resize() {
                    const width = svg_rect.clientWidth;
                    const height = svg_rect.clientHeight;
                    rect.setAttribute('width', width);
                    rect.setAttribute('height', height);
                }
                // Add the resize event listener and call the function
                window.addEventListener('resize', resize);
                resize();
                // Add the animationend event listener to show the text
                const text = document.querySelector(`#text-${i}`);
                svg_rect.addEventListener('animationend', function(ev) {
                    if (ev.animationName === 'fillIn') {
                    text.style.display = 'flex';
                    }
                });


                }
                

    
            </script>
        </div>
    </section>

    <section class="section-bg4" style="height: 800px" id="page_5">
        <div class="container">
            <h1 style="display:absolute; top:50px"><b>How Marco Polo view China?</b></h1>
        </div>
    </section>

    <section class="barista-section section-padding section-bg5" style="height: 800px" id="page_6">
        <div class="max-width:100%">
            <h1 style="text-align:center"><b>References</b></h1>
            <p style=" word-break: break-all;max-width:100%">cover Copyright © National Palace Museum. https://theme.npm.edu.tw/exh108/npm_anime/AlongtheRiver/ch/index.html</p>
        </div>
    </section>


</main>

</body>
</html>
